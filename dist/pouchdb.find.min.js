!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.pouchdbFind=e()}}(function(){var e;return function t(e,n,r){function o(u,a){if(!n[u]){if(!e[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[u]={exports:{}};e[u][0].call(f.exports,function(t){var n=e[u][1][t];return o(n?n:t)},f,f.exports,t,e,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){"use strict";function r(e){if(!e)return"undefined";switch(typeof e){case"function":return e.toString();case"string":return e.toString();default:return JSON.stringify(e)}}var o=e(4),i=e(5),u=i.Promise;t.exports=function(e){var t=e.db,n=e.viewName,a=e.map,s=e.reduce,c=e.temporary,f=e.pluginName,l=r(a)+r(s)+"undefined";if(!c&&t._cachedViews){var d=t._cachedViews[l];if(d)return u.resolve(d)}return t.info().then(function(e){function r(e){e.views=e.views||{};var t=n;-1===t.indexOf("/")&&(t=n+"/"+n);var r=e.views[t]=e.views[t]||{};if(!r[u])return r[u]=!0,e}var u=e.db_name+"-mrview-"+(c?"temp":i.MD5(l));return o(t,"_local/"+f,r).then(function(){return t.registerDependentDatabase(u).then(function(e){var n=e.db;n.auto_compaction=!0;var r={name:u,db:n,sourceDB:t,adapter:t.adapter,mapFun:a,reduceFun:s};return r.db.get("_local/lastSeq")["catch"](function(e){if(404!==e.status)throw e}).then(function(e){return r.seq=e?e.seq:0,c||(t._cachedViews=t._cachedViews||{},t._cachedViews[l]=r,r.db.on("destroyed",function(){delete t._cachedViews[l]})),r})})})})}},{4:4,5:5}],2:[function(e,t,n){(function(n){"use strict";function r(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,r)}catch(t){}}function o(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,o)}catch(t){}}function i(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function u(e){return 1===e.length&&/^1-/.test(e[0].rev)}function a(e,t){var n=g(e.key,t.key);return 0!==n?n:g(e.value,t.value)}function s(e,t,n){return n=n||0,"number"==typeof t?e.slice(n,t+n):n>0?e.slice(n):e}function c(e){var t=e.value,n=t&&"object"==typeof t&&t._id||e.id;return n}function f(e,t,n){try{return{output:t.apply(null,n)}}catch(r){return e.emit("error",r),{error:r}}}function l(e,t){var n=e.descending?"endkey":"startkey",o=e.descending?"startkey":"endkey";if("undefined"!=typeof e[n]&&"undefined"!=typeof e[o]&&g(e[n],e[o])>0)throw new r("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&e.reduce!==!1){if(e.include_docs)throw new r("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new r("Multi-key fetches for reduce views must use {group: true}")}if(e.group_level){if("number"!=typeof e.group_level)throw new r('Invalid value for integer: "'+e.group_level+'"');if(e.group_level<0)throw new r('Invalid value for positive integer: "'+e.group_level+'"')}}function d(e){return function(t){if(404===t.status)return e;throw t}}function h(e){function t(e,t,n){function r(){return u(l)?_.resolve(s):t.db.get(a)["catch"](d(s))}function o(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):_.resolve({rows:[]})}function i(e,t){for(var n=[],r={},o=0,i=t.rows.length;i>o;o++){var u=t.rows[o],a=u.doc;if(a&&(n.push(a),r[a._id]=!0,a._deleted=!f[a._id],!a._deleted)){var s=f[a._id];"value"in s&&(a.value=s.value)}}var c=Object.keys(f);return c.forEach(function(e){if(!r[e]){var t={_id:e},o=f[e];"value"in o&&(t.value=o.value),n.push(t)}}),e.keys=k.uniq(c.concat(e.keys)),n.push(e),n}var a="_local/doc_"+e,s={_id:a,keys:[]},c=n[e],f=c.indexableKeysToKeyValues,l=c.changes;return r().then(function(e){return o(e).then(function(t){return i(e,t)})})}function r(e,n,r){var o="_local/lastSeq";return e.db.get(o)["catch"](d({_id:o,seq:0})).then(function(o){var i=Object.keys(n);return _.all(i.map(function(r){return t(r,e,n)})).then(function(t){var n=k.flatten(t);return o.seq=r,n.push(o),e.db.bulkDocs({docs:n})})})}function h(e){var t="string"==typeof e?e:e.name,n=x[t];return n||(n=x[t]=new y),n}function p(e){return k.sequentialize(h(e),function(){return j(e)})()}function j(e){function t(e,t){var n={id:i._id,key:b(e)};"undefined"!=typeof t&&null!==t&&(n.value=b(t)),o.push(n)}function n(t,n){return function(){return r(e,t,n)}}var o,i,u=D(e.mapFun,t),s=e.seq||0,c=new y;return new _(function(t,r){function l(){c.finish().then(function(){e.seq=s,t()})}function d(){function t(e){r(e)}e.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:s,limit:O}).on("complete",function(t){var r=t.results;if(!r.length)return l();for(var h={},p=0,v=r.length;v>p;p++){var y=r[p];if("_"!==y.doc._id[0]){o=[],i=y.doc,i._deleted||f(e.sourceDB,u,[i]),o.sort(a);for(var g,b={},w=0,k=o.length;k>w;w++){var _=o[w],x=[_.key,_.id];_.key===g&&x.push(w);var $=m(x);b[$]=_,g=_.key}h[y.doc._id]={indexableKeysToKeyValues:b,changes:y.changes}}s=y.seq}return c.add(n(h,s)),r.length<O?l():d()}).on("error",t)}d()})}function E(e,t,n){0===n.group_level&&delete n.group_level;var r=n.group||n.group_level,o=C(e.reduceFun),i=[],u=n.group_level;t.forEach(function(e){var t=i[i.length-1],n=r?e.key:null;return r&&Array.isArray(n)&&"number"==typeof u&&(n=n.length>u?n.slice(0,u):n),t&&0===g(t.key[0][0],n)?(t.key.push([n,e.id]),void t.value.push(e.value)):void i.push({key:[[n,e.id]],value:[e.value]})});for(var a=0,c=i.length;c>a;a++){var l=i[a],d=f(e.sourceDB,o,[l.key,l.value,!1]);l.value=d.error?null:d.output,l.key=l.key[0][0]}return{rows:s(i,n.limit,n.skip)}}function A(e,t){return k.sequentialize(h(e),function(){return q(e,t)})()}function q(e,t){function n(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return o=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(n>t||t>n))return e.doc.value}var r=v.parseIndexableString(e.doc._id);return{key:r[0],id:r[1],value:"value"in e.doc?e.doc.value:null}})})}function r(n){var r;if(r=i?E(e,n,t):{total_rows:o,offset:u,rows:n},t.include_docs){var a=k.uniq(n.map(c));return e.sourceDB.allDocs({keys:a,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments}).then(function(e){var t={};return e.rows.forEach(function(e){e.doc&&(t["$"+e.id]=e.doc)}),n.forEach(function(e){var n=c(e),r=t["$"+n];r&&(e.doc=r)}),r})}return r}var o,i=e.reduceFun&&t.reduce!==!1,u=t.skip||0;"undefined"==typeof t.keys||t.keys.length||(t.limit=0,delete t.keys);var a=function(e){return e.reduce(function(e,t){return e.concat(t)})};if("undefined"!=typeof t.keys){var s=t.keys,f=s.map(function(e){var t={startkey:m([e]),endkey:m([e,{}])};return n(t)});return _.all(f).then(a).then(r)}var l={descending:t.descending};if("undefined"!=typeof t.startkey&&(l.startkey=m(t.descending?[t.startkey,{}]:[t.startkey])),"undefined"!=typeof t.endkey){var d=t.inclusive_end!==!1;t.descending&&(d=!d),l.endkey=m(d?[t.endkey,{}]:[t.endkey])}if("undefined"!=typeof t.key){var h=m([t.key]),p=m([t.key,{}]);l.descending?(l.endkey=h,l.startkey=p):(l.startkey=h,l.endkey=p)}return i||("number"==typeof t.limit&&(l.limit=t.limit),l.skip=u),n(l).then(r)}function I(e){return e.get("_local/"+S).then(function(t){var n={};Object.keys(t.views).forEach(function(e){var t=i(e),r="_design/"+t[0],o=t[1];n[r]=n[r]||{},n[r][o]=!0});var r={keys:Object.keys(n),include_docs:!0};return e.allDocs(r).then(function(r){var o={};r.rows.forEach(function(e){var r=e.key.substring(8);Object.keys(n[e.key]).forEach(function(n){var i=r+"/"+n;t.views[i]||(i=n);var u=Object.keys(t.views[i]),a=e.doc&&e.doc.views&&e.doc.views[n];u.forEach(function(e){o[e]=o[e]||a})})});var i=Object.keys(o).filter(function(e){return!o[e]}),u=i.map(function(t){return k.sequentialize(h(t),function(){return new e.constructor(t,e.__opts).destroy()})()});return _.all(u).then(function(){return{ok:!0}})})},d({ok:!0}))}function F(e,t,r){if("string"!=typeof t){l(r,t);var u={db:e,viewName:"temp_view/temp_view",map:t.map,reduce:t.reduce,temporary:!0,pluginName:S};return $.add(function(){return w(u).then(function(e){function t(){return e.db.destroy()}return k.fin(p(e).then(function(){return A(e,r)}),t)})}),$.finish()}var a=t,s=i(a),c=s[0],f=s[1];return e.get("_design/"+c).then(function(t){var i=t.views&&t.views[f];if(!i)throw new o("ddoc "+t._id+" has no view named "+f);M(t,f),l(r,i);var u={db:e,viewName:a,map:i.map,reduce:i.reduce,pluginName:S};return w(u).then(function(e){return"ok"===r.stale||"update_after"===r.stale?("update_after"===r.stale&&n.nextTick(function(){p(e)}),A(e,r)):p(e).then(function(){return A(e,r)})})})}var S=e.name,D=e.mapper,C=e.reducer,M=e.ddocValidator,P=function(e,t,n){var r=this;"function"==typeof t&&(n=t,t={}),t=k.extend(!0,{},t),"function"==typeof e&&(e={map:e});var o=_.resolve().then(function(){return F(r,e,t)});return k.promisedCallback(o,n),o},L=k.callbackify(function(){var e=this;return I(e)});return{query:P,viewCleanup:L}}var p,v=e(37),y=e(3),g=v.collate,m=v.toIndexableString,b=v.normalizeKey,w=e(1);p="undefined"!=typeof console&&"function"==typeof console.log?Function.prototype.bind.call(console.log,console):function(){};var k=e(5),_=k.Promise,x={},$=new y,O=50;k.inherits(r,Error),k.inherits(o,Error),t.exports=h}).call(this,e(41))},{1:1,3:3,37:37,41:41,5:5}],3:[function(e,t,n){"use strict";function r(){this.promise=new o(function(e){e()})}var o=e(5).Promise;r.prototype.add=function(e){return this.promise=this.promise["catch"](function(){}).then(function(){return e()}),this.promise},r.prototype.finish=function(){return this.promise},t.exports=r},{5:5}],4:[function(e,t,n){"use strict";var r=e(40).upsert;t.exports=function(e,t,n){return r.apply(e,[t,n])}},{40:40}],5:[function(e,t,n){(function(t,r){"use strict";"function"==typeof r.Promise?n.Promise=r.Promise:n.Promise=e(26),n.inherits=e(22),n.extend=e(39);var o=e(17);n.promisedCallback=function(e,n){return n&&e.then(function(e){t.nextTick(function(){n(null,e)})},function(e){t.nextTick(function(){n(e)})}),e},n.callbackify=function(e){return o(function(t){var r=t.pop(),o=e.apply(this,t);return"function"==typeof r&&n.promisedCallback(o,r),o})},n.fin=function(e,t){return e.then(function(e){var n=t();return"function"==typeof n.then?n.then(function(){return e}):e},function(e){var n=t();if("function"==typeof n.then)return n.then(function(){throw e});throw e})},n.sequentialize=function(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}},n.flatten=function(e){for(var t=[],n=0,r=e.length;r>n;n++)t=t.concat(e[n]);return t},n.uniq=function(e){for(var t={},n=0,r=e.length;r>n;n++)t["$"+e[n]]=!0;var o=Object.keys(t),i=new Array(o.length);for(n=0,r=o.length;r>n;n++)i[n]=o[n].substring(1);return i};var i=e(18),u=e(42);n.MD5=function(e){return t.browser?u.hash(e):i.createHash("md5").update(e).digest("hex")}}).call(this,e(41),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{17:17,18:18,22:22,26:26,39:39,41:41,42:42}],6:[function(e,t,n){"use strict";function r(e,t,n){e.request({method:"POST",url:"_index",body:t},n)}function o(e,t,n){e.request({method:"POST",url:"_find",body:t},n)}function i(e,t){e.request({method:"GET",url:"_index"},t)}function u(e,t,n){var r=t.ddoc,o=t.type||"json",i=t.name;if(!r)return n(null,new Error("you must provide an index's ddoc"));if(!i)return n(null,new Error("you must provide an index's name"));var u="_index/"+[r,o,i].map(encodeURIComponent).join("/");e.request({method:"DELETE",url:u},n)}n.createIndex=r,n.find=o,n.getIndexes=i,n.deleteIndex=u},{}],7:[function(e,t,n){"use strict";function r(e,t){return function(n){for(var r=[],o=0,i=e.length;i>o;o++){for(var u=l(e[o]),a=n,s=0,c=u.length;c>s;s++){var f=u[s];if(a=a[f],!a)break}r.push(a)}t(r)}}function o(e,t){var n=l(e);return function(e){for(var r=e,o=0,i=n.length;i>o;o++){var u=n[o];if(r=r[u],!r)return}t(r)}}function i(e,t){return function(n){t(n[e])}}function u(e,t){return function(n){for(var r=[],o=0,i=e.length;i>o;o++)r.push(n[e[o]]);t(r)}}function a(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];if(-1!==r.indexOf("."))return!1}return!0}function s(e,t){var n=a(e),s=1===e.length;return n?s?i(e[0],t):u(e,t):s?o(e[0],t):r(e,t)}var c=e(15),f=e(2),l=c.parseField,d=f({name:"indexes",mapper:function(e,t){var n=Object.keys(e.fields);return s(n,t)},reducer:function(){throw new Error("reduce not supported")},ddocValidator:function(e,t){var n=e.views[t];if(!n.map||!n.map.fields)throw new Error("ddoc "+e._id+" with view "+t+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")}});t.exports=d},{15:15,2:2}],8:[function(e,t,n){"use strict";function r(e,t,n){return a.upsert.call(e,t,n)}function o(e,t){function n(e){return e._rev&&"query"!==e.language&&(p=!0),e.language="query",e.views=e.views||{},v=!!e.views[c],e.views[c]={map:{fields:i.mergeObjects(t.index.fields)},reduce:"_count",options:{def:o}},e}var o=i.clone(t.index);t.index=l(t.index),f(t.index);var a=i.MD5(JSON.stringify(t)),c=t.name||"idx-"+a,d=t.ddoc||"idx-"+a,h="_design/"+d,p=!1,v=!1;return u("creating index",h),r(e,h,n).then(function(){if(p)throw new Error('invalid language for ddoc with id "'+h+'" (should be "query")')}).then(function(){var t=d+"/"+c;return s.query.call(e,t,{limit:0,reduce:!1}).then(function(){return{id:h,name:c,result:v?"exists":"created"}})})}var i=e(16),u=i.log,a=e(40),s=e(7),c=e(15),f=c.validateIndex,l=c.massageIndexDef;t.exports=o},{15:15,16:16,40:40,7:7}],9:[function(e,t,n){"use strict";function r(e,t){var n=t.ddoc;return e.get(n).then(function(t){return e.remove(t)}).then(function(){return o.viewCleanup.apply(e)}).then(function(){return{ok:!0}})}var o=e(7);t.exports=r},{7:7}],10:[function(e,t,n){"use strict";function r(e,t){for(var n=e,r=0,o=t.length;o>r;r++){var i=t[r];if(n=n[i],!n)break}return n}function o(e,t,n){function o(e){return s(r(e,n),t)}function i(e){var t=r(e,n);return"undefined"!=typeof t&&null!==t}function u(e){var t=r(e,n);return i(e)&&t instanceof Array}function a(e){var o=r(e,n);return t.some(function(e){return o.indexOf(e)>-1})}function c(e){var o=r(e,n);return t.every(function(e){return o.indexOf(e)>-1})}function f(e){var o=r(e,n);return o.length===t}switch(e){case"$eq":return function(e){return i(e)&&0===o(e)};case"$lte":return function(e){return i(e)&&o(e)<=0};case"$gte":return function(e){return i(e)&&o(e)>=0};case"$lt":return function(e){return i(e)&&o(e)<0};case"$gt":return function(e){return i(e)&&o(e)>0};case"$exists":return function(e){return i(e)};case"$ne":return function(e){var o=r(e,n);return t.every(function(e){return 0!==s(o,e)})};case"$in":return function(e){return u(e)&&a(e)};case"$nin":return function(e){return u(e)&&!a(e)};case"$size":return function(e){return u(e)&&f(e)};case"$all":return function(e){return u(e)&&c(e)}}}function i(e,t){var n=[];return t.forEach(function(t){var r=e.selector[t],i=d(t);r&&Object.keys(r).forEach(function(e){var t=r[e],u=o(e,t,i);n.push(u)})}),function(e){for(var t=0,r=n.length;r>t;t++){var o=n[t];if(!o(e.doc))return!1}return!0}}function u(e){function t(t){return e.map(function(e){var n="string"==typeof e?e:f(e),o=d(n),i=r(t,o);return i})}return function(e,n){var r=t(e.doc),o=t(n.doc),i=s(r,o);return 0!==i?i:h.compare(e.doc._id,n.doc._id)}}function a(e,t,n){var r=i(t,n);if(e=e.filter(r),t.sort){var o=u(t.sort);e=e.sort(o),"string"!=typeof t.sort[0]&&"desc"===l(t.sort[0])&&(e=e.reverse())}if("limit"in t||"skip"in t){var a=t.skip||0,s=("limit"in t?t.limit:e.length)+a;e=e.slice(a,s)}return e}var s=e(37).collate,c=e(15),f=c.getKey,l=c.getValue,d=c.parseField,h=e(16);t.exports=a},{15:15,16:16,37:37}],11:[function(e,t,n){"use strict";function r(e){return e.ddoc.substring(8)+"/"+e.name}function o(e,t){return t.selector&&(t.selector=d(t.selector)),t.sort&&(t.sort=h(t.sort)),v(t),u(e).then(function(n){var o=c(t,n.indexes),u=o.index,f=i.extend(!0,{include_docs:!0,reduce:!1},o.queryOpts);if("startkey"in f&&"endkey"in f&&a(f.startkey,f.endkey)>0)return{docs:[]};var d=t.sort&&"string"!=typeof t.sort[0]&&"desc"===p(t.sort[0]);return d&&(f.descending=!0,f=y(f)),o.inMemoryFields.length||("limit"in t&&(f.limit=t.limit),"skip"in t&&(f.skip=t.skip)),m.resolve().then(function(){if("_all_docs"===u.name)return e.allDocs(f);var t=r(u);return s.query.call(e,t,f)}).then(function(e){return f.inclusive_start===!1&&(e.rows=g(e.rows,f.startkey,u)),o.inMemoryFields.length&&(e.rows=l(e.rows,t,o.inMemoryFields)),{docs:e.rows.map(function(e){var n=e.doc;return t.fields?i.pick(n,t.fields):n})}})})}var i=e(16),u=e(13),a=e(37).collate,s=e(7),c=e(12),f=e(15),l=e(10),d=f.massageSelector,h=f.massageSort,p=f.getValue,v=f.validateFindRequest,y=f.reverseOptions,g=f.filterInclusiveStart,m=i.Promise;t.exports=o},{10:10,12:12,13:13,15:15,16:16,37:37,7:7}],12:[function(e,t,n){"use strict";function r(e,t){for(var n=e.def.fields.map($),r=0,o=n.length;o>r;r++){var i=n[r];if(t===i)return!0}return!1}function o(e,t){var n=e[t],r=$(n);return"$eq"!==r}function i(e,t){var n=t.def.fields.map($);return e.slice().sort(function(e,t){var r=n.indexOf(e),o=n.indexOf(t);return-1===r&&(r=Number.MAX_VALUE),-1===o&&(o=Number.MAX_VALUE),k.compare(r,o)})}function u(e,t,n){n=i(n,e);for(var u=!1,a=0,s=n.length;s>a;a++){var c=n[a];if(u||!r(e,c))return n.slice(a);s-1>a&&o(t,c)&&(u=!0)}return[]}function a(e){var t=[];return Object.keys(e).forEach(function(n){var r=e[n];Object.keys(r).forEach(function(e){"$ne"===e&&t.push(n)})}),t}function s(e,t,n,r){var o=k.flatten(e,u(t,n,r),a(n));return i(k.uniq(o),t)}function c(e,t,n){if(t){var r=k.oneArrayIsStrictSubArrayOfOther(t,e),o=k.oneArrayIsSubArrayOfOther(n,e);return r&&o}return k.oneSetIsSubArrayOfOther(n,e)}function f(e,t){var n=e[0],r=t[n],o=1===Object.keys(r).length&&"$ne"===$(r);return!o}function l(e,t,n,r){var o=e.def.fields.map($),i=c(o,t,n);if(!i)return!1;var u=f(o,r);return u}function d(e,t,n,r){for(var o=[],i=0,u=r.length;u>i;i++){var a=r[i],s=l(a,n,t,e);s&&o.push(a)}return o}function h(e,t,n,r){function o(e){for(var t=e.def.fields.map($),n=0,r=0,o=t.length;o>r;r++){var i=t[r];u[i]&&n++}return n}var i=d(e,t,n,r);if(0===i.length)return null;if(1===i.length)return i[0];var u=k.arrayToObject(t);return k.max(i,o)}function p(e,t){switch(e){case"$eq":return{key:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1};case"$exists":return t?{startkey:q}:{endkey:E};case"$type":switch(t){case"null":return{startkey:I,endkey:F};case"boolean":return{startkey:S,endkey:D};case"number":return{startkey:C,endkey:M};case"string":return{startkey:P,endkey:L};case"array":return{startkey:N,endkey:T};case"object":return{startkey:B,endkey:U}}}}function v(e,t){for(var n,r=$(t.def.fields[0]),o=e[r],i=Object.keys(o),u=0;u<i.length;u++){var a=i[u],s=o[a],c=p(a,s);n=n?k.mergeObjects([n,c]):c}return{queryOpts:n,inMemoryFields:[]}}function y(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1};case"$exists":return t?{startkey:q,endkey:A}:{startkey:E,endkey:E}}}function g(e,t){function n(e){r!==!1&&a.push(E),o!==!1&&s.push(A),u=i.slice(e)}for(var r,o,i=t.def.fields.map($),u=[],a=[],s=[],c=0,f=i.length;f>c;c++){var l=i[c],d=e[l];if(!d){n(c);break}if(c>0){if("$ne"in d){n(c);break}var h="$gt"in d||"$gte"in d||"$lt"in d||"$lte"in d,p=Object.keys(e[i[c-1]]),v=k.arrayEquals(p,["$eq"]),g=k.arrayEquals(p,Object.keys(d)),m=h&&!v&&!g;if(m){n(c);break}}for(var b=Object.keys(d),w=null,_=0;_<b.length;_++){var x=b[_],O=d[x],j=y(x,O);w=w?k.mergeObjects([w,j]):j}a.push("startkey"in w?w.startkey:E),s.push("endkey"in w?w.endkey:A),"inclusive_start"in w&&(r=w.inclusive_start),"inclusive_end"in w&&(o=w.inclusive_end)}var q={startkey:a,endkey:s};return"undefined"!=typeof r&&(q.inclusive_start=r),"undefined"!=typeof o&&(q.inclusive_end=o),{queryOpts:q,inMemoryFields:u}}function m(e,t){return 1===t.def.fields.length?v(e,t):g(e,t)}function b(e,t,n){if("$ne"===$(O(n)))return new Error("couldn't find a usable index. try using $and with $lt/$gt instead of $ne");var r=t&&t.length>=e.length?t:e;return new Error("couldn't find a usable index. try creating an index on: "+r.join(", "))}function w(e,t){_("planning query",e);var n=e.selector,r=e.sort,o=j(n,r),i=o.fields,u=o.sortOrder,a=h(n,i,u,t);if(!a)throw b(i,u,n);var c=a.def.fields[0],f=n[$(c)];if(1===Object.keys(f).length&&"$ne"===$(f))throw new Error("$ne can't be used here. try $gt/$lt instead");var l=m(n,a),d=l.queryOpts,p=l.inMemoryFields,v=s(p,a,n,i),y={queryOpts:d,index:a,inMemoryFields:v};return _("query plan",y),y}var k=e(16),_=k.log,x=e(15),$=x.getKey,O=x.getValue,j=x.getUserFields,E=null,A={"￿":{}},q=!1,I=null,F=null,S=!1,D=!0,C=0,M=Number.MAX_VALUE,P="",L="￿￿￿",N=[],T=[{"￿":{}}],B={},U={"￿":{}};t.exports=w},{15:15,16:16}],13:[function(e,t,n){"use strict";function r(e){return e.allDocs({startkey:"_design/",endkey:"_design/￿",include_docs:!0}).then(function(e){var t={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return t.indexes=o.flatten(t.indexes,e.rows.filter(function(e){return"query"===e.doc.language}).map(function(e){var t=Object.keys(e.doc.views);return t.map(function(t){var n=e.doc.views[t];return{ddoc:e.id,name:t,type:"json",def:u(n.options.def)}})})),t.indexes.sort(function(e,t){return o.compare(e.name,t.name)}),t.total_rows=t.indexes.length,t})}var o=e(16),i=e(15),u=i.massageIndexDef;t.exports=r},{15:15,16:16}],14:[function(e,t,n){"use strict";var r=e(16),o=r.callbackify;n.createIndex=o(e(8)),n.find=o(e(11)),n.getIndexes=o(e(13)),n.deleteIndex=o(e(9))},{11:11,13:13,16:16,8:8,9:9}],15:[function(e,t,n){"use strict";function r(e){return Object.keys(e)[0]}function o(e){return e[r(e)]}function i(e){return Object.keys(e).length}function u(e,t){var n={};return n[e]=t,n}function a(e){return e&&e.map(function(e){if("string"==typeof e){var t={};return t[e]="asc",t}return e})}function s(e,t,n){"undefined"==typeof n.$eq&&("undefined"!=typeof n.$gte?"$gte"===e?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):"undefined"!=typeof n.$gt?"$gte"===e?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}function c(e,t,n){"undefined"==typeof n.$eq&&("undefined"!=typeof n.$lte?"$lte"===e?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):"undefined"!=typeof n.$lt?"$lte"===e?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}function f(e,t){"undefined"==typeof t.$eq&&("$ne"in t?t.$ne.push(e):t.$ne=[e])}function l(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}function d(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(n){var r=e[n];"object"!=typeof r&&(r={$eq:r});var o=t[n]=t[n]||{};Object.keys(r).forEach(function(e){var t=r[e];return"$gt"===e||"$gte"===e?s(e,t,o):"$lt"===e||"$lte"===e?c(e,t,o):"$ne"===e?f(t,o):"$eq"===e?l(t,o):void(o[e]=t)})})}),t}function h(e){var t=_.clone(e),n=!1;"$and"in t&&(t=d(t.$and),n=!0);for(var r=Object.keys(t),o=0;o<r.length;o++){var i=r[o],u=t[i];"object"!=typeof u?u={$eq:u}:"$ne"in u&&!n&&(u.$ne=[u.$ne]),t[i]=u}return t}function p(e){return e.fields=e.fields.map(function(e){if("string"==typeof e){var t={};return t[e]="asc",t}return e}),e}function v(e,t){for(var n=[],o=0;o<t.def.fields.length;o++){var i=r(t.def.fields[o]);n.push(e[i])}return n}function y(e,t,n){for(var r=n.def.fields,o=0,i=e.length;i>o;o++){var u=e[o],a=v(u.doc,n);if(1===r.length)a=a[0];else for(;a.length>t.length;)a.pop();if(Math.abs(x.collate(a,t))>0)break}return o>0?e.slice(o):e}function g(e){var t=_.clone(e);return delete t.startkey,delete t.endkey,delete t.inclusive_start,delete t.inclusive_end,"endkey"in e&&(t.startkey=e.endkey),"startkey"in e&&(t.endkey=e.startkey),"inclusive_start"in e&&(t.inclusive_end=e.inclusive_start),"inclusive_end"in e&&(t.inclusive_start=e.inclusive_end),t}function m(e){var t=e.fields.filter(function(e){return"asc"===o(e)});if(0!==t.length&&t.length!==e.fields.length)throw new Error("unsupported mixed sorting")}function b(e){if("object"!=typeof e.selector)throw new Error("you must provide a selector when you find()");if("sort"in e&&(!e.sort||!Array.isArray(e.sort)))throw new Error("invalid sort json - should be an array");var t=Object.keys(e.selector),n=e.sort?a(e.sort).map(r):[];if(!_.oneSetIsSubArrayOfOther(t,n))throw new Error("conflicting sort and selector fields");for(var o=e.selector.$and||[e.selector],i=0;i<o.length;i++){var u=o[i],s=Object.keys(u);if(0===s.length)throw new Error("invalid empty selector")}}function w(e){for(var t=[],n="",r=0,o=e.length;o>r;r++){var i=e[r];"."===i?r>0&&"\\"===e[r-1]?n=n.substring(0,n.length-1)+".":(t.push(n),n=""):n+=i}return n&&t.push(n),t}function k(e,t){var n,o=Object.keys(e),i=t?t.map(r):[];return n=o.length>i.length?o:i,0===i.length?{fields:n}:(n=n.sort(function(e,t){var n=i.indexOf(e);-1===n&&(n=Number.MAX_VALUE);var r=i.indexOf(t);return-1===r&&(r=Number.MAX_VALUE),r>n?-1:n>r?1:0}),{fields:n,sortOrder:t.map(r)})}var _=e(16),x=e(37);t.exports={getKey:r,getValue:o,getSize:i,massageSort:a,massageSelector:h,validateIndex:m,validateFindRequest:b,reverseOptions:g,filterInclusiveStart:y,massageIndexDef:p,parseField:w,objectFrom:u,getUserFields:k}},{16:16,37:37}],16:[function(e,t,n){(function(t,r,o){"use strict";var i;i="undefined"!=typeof window&&window.PouchDB?window.PouchDB.utils.Promise:"function"==typeof r.Promise?r.Promise:e(26),n.once=function(e){var t=!1;return n.getArguments(function(n){if(t)throw console.trace(),new Error("once called  more than once");t=!0,e.apply(this,n)})},n.getArguments=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}},n.toPromise=function(e){return n.getArguments(function(r){var o,u=this,a="function"==typeof r[r.length-1]?r.pop():!1;a&&(o=function(e,n){t.nextTick(function(){a(e,n)})});var s=new i(function(t,o){try{var i=n.once(function(e,n){e?o(e):t(n)});r.push(i),e.apply(u,r)}catch(a){o(a)}});return o&&s.then(function(e){o(null,e)},o),s.cancel=function(){return this},s})},n.inherits=e(22),n.Promise=i,t.browser&&"atob"in r?n.atob=function(e){return atob(e)}:n.atob=function(e){var t=new o(e,"base64");if(t.toString("base64")!==e)throw"Cannot base64 encode full string";return t.toString("binary")},t.browser&&"btoa"in r?n.btoa=function(e){return btoa(e)}:n.btoa=function(e){return new o(e,"binary").toString("base64")},n.clone=function(e){return n.extend(!0,{},e)},n.extend=e(39),n.callbackify=function(e){return n.getArguments(function(t){var r=t.pop(),o=e.apply(this,t);return"function"==typeof r&&n.promisedCallback(o,r),o})},n.promisedCallback=function(e,n){return n&&e.then(function(e){t.nextTick(function(){n(null,e)})},function(e){t.nextTick(function(){n(e)})}),e};var u=e(18),a=e(42);n.MD5=function(e){return t.browser?a.hash(e):u.createHash("md5").update(e).digest("hex")},n.flatten=n.getArguments(function(e){for(var t=[],r=0,o=e.length;o>r;r++){var i=e[r];Array.isArray(i)?t=t.concat(n.flatten.apply(null,i)):t.push(i)}return t}),n.mergeObjects=function(e){for(var t={},r=0,o=e.length;o>r;r++)t=n.extend(!0,t,e[r]);return t},n.pick=function(e,t){for(var n={},r=0,o=t.length;o>r;r++){var i=t[r];n[i]=e[i]}return n},n.oneArrayIsSubArrayOfOther=function(e,t){for(var n=0,r=Math.min(e.length,t.length);r>n;n++)if(e[n]!==t[n])return!1;return!0},n.oneArrayIsStrictSubArrayOfOther=function(e,t){return e.length>t.length?!1:n.oneArrayIsSubArrayOfOther(e,t)},n.oneSetIsSubArrayOfOther=function(e,t){e=e.slice();for(var n=0,r=t.length;r>n;n++){var o=t[n];if(!e.length)break;var i=e.indexOf(o);if(-1===i)return!1;e.splice(i,1)}return!0},n.compare=function(e,t){return t>e?-1:e>t?1:0},n.arrayToObject=function(e){for(var t={},n=0,r=e.length;r>n;n++)t[e[n]]=!0;return t},n.max=function(e,t){for(var n=null,r=-1,o=0,i=e.length;i>o;o++){var u=e[o],a=t(u);a>r&&(r=a,n=u)}return n},n.arrayEquals=function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;r>n;n++)if(e[n]!==t[n])return!1;return!0},n.uniq=function(e){for(var t={},n=0;n<e.length;n++)t["$"+e[n]]=!0;return Object.keys(t).map(function(e){return e.substring(1)})},n.log=e(19)("pouchdb:find")}).call(this,e(41),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e(18).Buffer)},{18:18,19:19,22:22,26:26,39:39,41:41,42:42}],17:[function(e,t,n){"use strict";function r(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}return e.call(this,[])}}t.exports=r},{}],18:[function(e,t,n){},{}],19:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function u(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function a(){var e;try{e=n.storage.debug}catch(t){}return e}function s(){try{return window.localStorage}catch(e){}}n=t.exports=e(20),n.log=i,n.formatArgs=o,n.save=u,n.load=a,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:s(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(a())},{20:20}],20:[function(e,t,n){function r(){return n.colors[f++%n.colors.length]}function o(e){function t(){}function o(){var e=o,t=+new Date,i=t-(c||t);e.diff=i,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var u=Array.prototype.slice.call(arguments);u[0]=n.coerce(u[0]),"string"!=typeof u[0]&&(u=["%o"].concat(u));var a=0;u[0]=u[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;a++;var o=n.formatters[r];if("function"==typeof o){var i=u[a];t=o.call(e,i),u.splice(a,1),a--}return t}),"function"==typeof n.formatArgs&&(u=n.formatArgs.apply(e,u));var s=o.log||n.log||console.log.bind(console);s.apply(e,u)}t.enabled=!1,o.enabled=!0;var i=n.enabled(e)?o:t;return i.namespace=e,i}function i(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,o=0;r>o;o++)t[o]&&(e=t[o].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function u(){n.enable("")}function a(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function s(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=o,n.coerce=s,n.disable=u,n.enable=i,n.enabled=a,n.humanize=e(36),n.names=[],n.skips=[],n.formatters={};var c,f=0},{36:36}],21:[function(e,t,n){(function(e){"use strict";function n(){f=!0;for(var e,t,n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}f=!1}function r(e){1!==l.push(e)||f||o()}var o,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var u=0,a=new i(n),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),o=function(){s.data=u=++u%2}}else if(e.setImmediate||"undefined"==typeof e.MessageChannel)o="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){
var t=e.document.createElement("script");t.onreadystatechange=function(){n(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(n,0)};else{var c=new e.MessageChannel;c.port1.onmessage=n,o=function(){c.port2.postMessage(0)}}var f,l=[];t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],22:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],23:[function(e,t,n){"use strict";function r(){}t.exports=r},{}],24:[function(e,t,n){"use strict";function r(e){function t(e,t){function o(e){c[t]=e,++f===n&!r&&(r=!0,s.resolve(d,c))}u(e).then(o,function(e){r||(r=!0,s.reject(d,e))})}if("[object Array]"!==Object.prototype.toString.call(e))return i(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return u([]);for(var c=new Array(n),f=0,l=-1,d=new o(a);++l<n;)t(e[l],l);return d}var o=e(27),i=e(30),u=e(31),a=e(23),s=e(25);t.exports=r},{23:23,25:25,27:27,30:30,31:31}],25:[function(e,t,n){"use strict";function r(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}var o=e(34),i=e(32),u=e(33);n.resolve=function(e,t){var a=o(r,t);if("error"===a.status)return n.reject(e,a.value);var s=a.value;if(s)i.safely(e,s);else{e.state=u.FULFILLED,e.outcome=t;for(var c=-1,f=e.queue.length;++c<f;)e.queue[c].callFulfilled(t)}return e},n.reject=function(e,t){e.state=u.REJECTED,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e}},{32:32,33:33,34:34}],26:[function(e,t,n){t.exports=n=e(27),n.resolve=e(31),n.reject=e(30),n.all=e(24),n.race=e(29)},{24:24,27:27,29:29,30:30,31:31}],27:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=a.PENDING,this.queue=[],this.outcome=void 0,e!==i&&u.safely(this,e)}var o=e(35),i=e(23),u=e(32),a=e(33),s=e(28);t.exports=r,r.prototype["catch"]=function(e){return this.then(null,e)},r.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a.FULFILLED||"function"!=typeof t&&this.state===a.REJECTED)return this;var n=new r(i);if(this.state!==a.PENDING){var u=this.state===a.FULFILLED?e:t;o(n,u,this.outcome)}else this.queue.push(new s(n,e,t));return n}},{23:23,28:28,32:32,33:33,35:35}],28:[function(e,t,n){"use strict";function r(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}var o=e(25),i=e(35);t.exports=r,r.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},r.prototype.otherCallFulfilled=function(e){i(this.promise,this.onFulfilled,e)},r.prototype.callRejected=function(e){o.reject(this.promise,e)},r.prototype.otherCallRejected=function(e){i(this.promise,this.onRejected,e)}},{25:25,35:35}],29:[function(e,t,n){"use strict";function r(e){function t(e){u(e).then(function(e){r||(r=!0,s.resolve(f,e))},function(e){r||(r=!0,s.reject(f,e))})}if("[object Array]"!==Object.prototype.toString.call(e))return i(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return u([]);for(var c=-1,f=new o(a);++c<n;)t(e[c]);return f}var o=e(27),i=e(30),u=e(31),a=e(23),s=e(25);t.exports=r},{23:23,25:25,27:27,30:30,31:31}],30:[function(e,t,n){"use strict";function r(e){var t=new o(i);return u.reject(t,e)}var o=e(27),i=e(23),u=e(25);t.exports=r},{23:23,25:25,27:27}],31:[function(e,t,n){"use strict";function r(e){if(e)return e instanceof o?e:u.resolve(new o(i),e);var t=typeof e;switch(t){case"boolean":return a;case"undefined":return c;case"object":return s;case"number":return f;case"string":return l}}var o=e(27),i=e(23),u=e(25);t.exports=r;var a=u.resolve(new o(i),!1),s=u.resolve(new o(i),null),c=u.resolve(new o(i),void 0),f=u.resolve(new o(i),0),l=u.resolve(new o(i),"")},{23:23,25:25,27:27}],32:[function(e,t,n){"use strict";function r(e,t){function n(t){a||(a=!0,o.reject(e,t))}function r(t){a||(a=!0,o.resolve(e,t))}function u(){t(r,n)}var a=!1,s=i(u);"error"===s.status&&n(s.value)}var o=e(25),i=e(34);n.safely=r},{25:25,34:34}],33:[function(e,t,n){n.REJECTED=["REJECTED"],n.FULFILLED=["FULFILLED"],n.PENDING=["PENDING"]},{}],34:[function(e,t,n){"use strict";function r(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}t.exports=r},{}],35:[function(e,t,n){"use strict";function r(e,t,n){o(function(){var r;try{r=t(n)}catch(o){return i.reject(e,o)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)})}var o=e(21),i=e(25);t.exports=r},{21:21,25:25}],36:[function(e,t,n){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*f;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function o(e){return e>=f?Math.round(e/f)+"d":e>=c?Math.round(e/c)+"h":e>=s?Math.round(e/s)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function i(e){return u(e,f,"day")||u(e,c,"hour")||u(e,s,"minute")||u(e,a,"second")||e+" ms"}function u(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,s=60*a,c=60*s,f=24*c,l=365.25*f;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?i(e):o(e)}},{}],37:[function(e,t,n){"use strict";function r(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return f(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),r=t?e:Object.keys(e),o=-1,i=r.length,u="";if(t)for(;++o<i;)u+=n.toIndexableString(r[o]);else for(;++o<i;){var a=r[o];u+=n.toIndexableString(a)+n.toIndexableString(e[a])}return u}return""}function o(e,t){var n,r=t,o="1"===e[t];if(o)n=0,t++;else{var i="0"===e[t];t++;var u="",a=e.substring(t,t+d),s=parseInt(a,10)+l;for(i&&(s=-s),t+=d;;){var c=e[t];if("\x00"===c)break;u+=c,t++}u=u.split("."),n=1===u.length?parseInt(u,10):parseFloat(u[0]+"."+u[1]),i&&(n-=10),0!==s&&(n=parseFloat(n+"e"+s))}return{num:n,length:t-r}}function i(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var o=r.element,i=r.index;if(Array.isArray(o))o.push(n);else if(i===e.length-2){var u=e.pop();o[u]=n}else e.push(n)}}function u(e,t){for(var r=Math.min(e.length,t.length),o=0;r>o;o++){var i=n.collate(e[o],t[o]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}function a(e,t){return e===t?0:e>t?1:-1}function s(e,t){for(var r=Object.keys(e),o=Object.keys(t),i=Math.min(r.length,o.length),u=0;i>u;u++){var a=n.collate(r[u],o[u]);if(0!==a)return a;if(a=n.collate(e[r[u]],t[o[u]]),0!==a)return a}return r.length===o.length?0:r.length>o.length?1:-1}function c(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);return~n?null===e?1:Array.isArray(e)?5:3>n?n+2:n+3:Array.isArray(e)?5:void 0}function f(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=0>e,o=r?"0":"2",i=(r?-n:n)-l,u=p.padLeft(i.toString(),"0",d);o+=h+u;var a=Math.abs(parseFloat(t[0]));r&&(a=10-a);var s=a.toFixed(20);return s=s.replace(/\.?0+$/,""),o+=h+s}var l=-324,d=3,h="",p=e(38);n.collate=function(e,t){if(e===t)return 0;e=n.normalizeKey(e),t=n.normalizeKey(t);var r=c(e),o=c(t);if(r-o!==0)return r-o;if(null===e)return 0;switch(typeof e){case"number":return e-t;case"boolean":return e===t?0:t>e?-1:1;case"string":return a(e,t)}return Array.isArray(e)?u(e,t):s(e,t)},n.normalizeKey=function(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-(1/0)||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var r=e.length;e=new Array(r);for(var o=0;r>o;o++)e[o]=n.normalizeKey(t[o])}else{if(e instanceof Date)return e.toJSON();if(null!==e){e={};for(var i in t)if(t.hasOwnProperty(i)){var u=t[i];"undefined"!=typeof u&&(e[i]=n.normalizeKey(u))}}}}return e},n.toIndexableString=function(e){var t="\x00";return e=n.normalizeKey(e),c(e)+h+r(e)+t},n.parseIndexableString=function(e){for(var t=[],n=[],r=0;;){var u=e[r++];if("\x00"!==u)switch(u){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var a=o(e,r);t.push(a.num),r+=a.length;break;case"4":for(var s="";;){var c=e[r];if("\x00"===c)break;s+=c,r++}s=s.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(s);break;case"5":var f={element:[],index:t.length};t.push(f.element),n.push(f);break;case"6":var l={element:{},index:t.length};t.push(l.element),n.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+u)}else{if(1===t.length)return t.pop();i(t,n)}}}},{38:38}],38:[function(e,t,n){"use strict";function r(e,t,n){for(var r="",o=n-e.length;r.length<o;)r+=t;return r}n.padLeft=function(e,t,n){var o=r(e,t,n);return o+e},n.padRight=function(e,t,n){var o=r(e,t,n);return e+o},n.stringLexCompare=function(e,t){var n,r=e.length,o=t.length;for(n=0;r>n;n++){if(n===o)return 1;var i=e.charAt(n),u=t.charAt(n);if(i!==u)return u>i?-1:1}return o>r?-1:0},n.intToDecimalForm=function(e){var t=0>e,n="";do{var r=t?-Math.ceil(e%10):Math.floor(e%10);n=r+n,e=t?Math.ceil(e/10):Math.floor(e/10)}while(e);return t&&"0"!==n&&(n="-"+n),n}},{}],39:[function(e,t,n){"use strict";function r(e){return null===e?String(e):"object"==typeof e||"function"==typeof e?c[h.call(e)]||"object":typeof e}function o(e){return null!==e&&e===e.window}function i(e){if(!e||"object"!==r(e)||e.nodeType||o(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var n;for(n in e);return void 0===n||p.call(e,n)}function u(e){return"function"===r(e)}function a(){for(var e=[],t=-1,n=arguments.length,r=new Array(n);++t<n;)r[t]=arguments[t];var o={};e.push({args:r,result:{container:o,key:"key"}});for(var i;i=e.pop();)s(e,i.args,i.result);return o.key}function s(e,t,n){var r,o,a,s,c,f,l,d=t[0]||{},h=1,p=t.length,y=!1,g=/\d+/;for("boolean"==typeof d&&(y=d,d=t[1]||{},h=2),"object"==typeof d||u(d)||(d={}),p===h&&(d=this,--h);p>h;h++)if(null!=(r=t[h])){l=v(r);for(o in r)if(!(o in Object.prototype)){if(l&&!g.test(o))continue;if(a=d[o],s=r[o],d===s)continue;y&&s&&(i(s)||(c=v(s)))?(c?(c=!1,f=a&&v(a)?a:[]):f=a&&i(a)?a:{},e.push({args:[y,f,s],result:{container:d,key:o}})):void 0!==s&&(v(r)&&u(s)||(d[o]=s))}}n.container[n.key]=d}for(var c={},f=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],l=0;l<f.length;l++){var d=f[l];c["[object "+d+"]"]=d.toLowerCase()}var h=c.toString,p=c.hasOwnProperty,v=Array.isArray||function(e){return"array"===r(e)};t.exports=a},{}],40:[function(e,t,n){(function(t){"use strict";function r(e,t,n){return new i(function(r,i){return"string"!=typeof t?i(new Error("doc id is required")):void e.get(t,function(u,a){if(u){if(404!==u.status)return i(u);a={}}var s=a._rev,c=n(a);return c?(c._id=t,c._rev=s,void r(o(e,c,n))):r({updated:!1,rev:s})})})}function o(e,t,n){return e.put(t).then(function(e){return{updated:!0,rev:e.rev}},function(o){if(409!==o.status)throw o;return r(e,t._id,n)})}var i;i="undefined"!=typeof window&&window.PouchDB?window.PouchDB.utils.Promise:"function"==typeof t.Promise?t.Promise:e(26),n.upsert=function(e,t,n){var o=this,i=r(o,e,t);return"function"!=typeof n?i:void i.then(function(e){n(null,e)},n)},n.putIfNotExists=function(e,t,n){var o=this;"string"!=typeof e&&(n=t,t=e,e=t._id);var i=function(e){return e._rev?!1:t},u=r(o,e,i);return"function"!=typeof n?u:void u.then(function(e){n(null,e)},n)},"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(n)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{26:26}],41:[function(e,t,n){function r(){if(!a){a=!0;for(var e,t=u.length;t;){e=u,u=[];for(var n=-1;++n<t;)e[n]();t=u.length}a=!1}}function o(){}var i=t.exports={},u=[],a=!1;i.nextTick=function(e){u.push(e),a||setTimeout(r,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=o,i.addListener=o,i.once=o,i.off=o,i.removeListener=o,i.removeAllListeners=o,i.emit=o,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],42:[function(t,n,r){!function(t){if("object"==typeof r)n.exports=t();else if("function"==typeof e&&e.amd)e(t);else{var o;try{o=window}catch(i){o=self}o.SparkMD5=t()}}(function(e){"use strict";var t=function(e,t){return e+t&4294967295},n=function(e,n,r,o,i,u){return n=t(t(n,e),t(o,u)),t(n<<i|n>>>32-i,r)},r=function(e,t,r,o,i,u,a){return n(t&r|~t&o,e,t,i,u,a)},o=function(e,t,r,o,i,u,a){return n(t&o|r&~o,e,t,i,u,a)},i=function(e,t,r,o,i,u,a){return n(t^r^o,e,t,i,u,a)},u=function(e,t,r,o,i,u,a){return n(r^(t|~o),e,t,i,u,a)},a=function(e,n){var a=e[0],s=e[1],c=e[2],f=e[3];a=r(a,s,c,f,n[0],7,-680876936),f=r(f,a,s,c,n[1],12,-389564586),c=r(c,f,a,s,n[2],17,606105819),s=r(s,c,f,a,n[3],22,-1044525330),a=r(a,s,c,f,n[4],7,-176418897),f=r(f,a,s,c,n[5],12,1200080426),c=r(c,f,a,s,n[6],17,-1473231341),s=r(s,c,f,a,n[7],22,-45705983),a=r(a,s,c,f,n[8],7,1770035416),f=r(f,a,s,c,n[9],12,-1958414417),c=r(c,f,a,s,n[10],17,-42063),s=r(s,c,f,a,n[11],22,-1990404162),a=r(a,s,c,f,n[12],7,1804603682),f=r(f,a,s,c,n[13],12,-40341101),c=r(c,f,a,s,n[14],17,-1502002290),s=r(s,c,f,a,n[15],22,1236535329),a=o(a,s,c,f,n[1],5,-165796510),f=o(f,a,s,c,n[6],9,-1069501632),c=o(c,f,a,s,n[11],14,643717713),s=o(s,c,f,a,n[0],20,-373897302),a=o(a,s,c,f,n[5],5,-701558691),f=o(f,a,s,c,n[10],9,38016083),c=o(c,f,a,s,n[15],14,-660478335),s=o(s,c,f,a,n[4],20,-405537848),a=o(a,s,c,f,n[9],5,568446438),f=o(f,a,s,c,n[14],9,-1019803690),c=o(c,f,a,s,n[3],14,-187363961),s=o(s,c,f,a,n[8],20,1163531501),a=o(a,s,c,f,n[13],5,-1444681467),f=o(f,a,s,c,n[2],9,-51403784),c=o(c,f,a,s,n[7],14,1735328473),s=o(s,c,f,a,n[12],20,-1926607734),a=i(a,s,c,f,n[5],4,-378558),f=i(f,a,s,c,n[8],11,-2022574463),c=i(c,f,a,s,n[11],16,1839030562),s=i(s,c,f,a,n[14],23,-35309556),a=i(a,s,c,f,n[1],4,-1530992060),f=i(f,a,s,c,n[4],11,1272893353),c=i(c,f,a,s,n[7],16,-155497632),s=i(s,c,f,a,n[10],23,-1094730640),a=i(a,s,c,f,n[13],4,681279174),f=i(f,a,s,c,n[0],11,-358537222),c=i(c,f,a,s,n[3],16,-722521979),s=i(s,c,f,a,n[6],23,76029189),a=i(a,s,c,f,n[9],4,-640364487),f=i(f,a,s,c,n[12],11,-421815835),c=i(c,f,a,s,n[15],16,530742520),s=i(s,c,f,a,n[2],23,-995338651),a=u(a,s,c,f,n[0],6,-198630844),f=u(f,a,s,c,n[7],10,1126891415),c=u(c,f,a,s,n[14],15,-1416354905),s=u(s,c,f,a,n[5],21,-57434055),a=u(a,s,c,f,n[12],6,1700485571),f=u(f,a,s,c,n[3],10,-1894986606),c=u(c,f,a,s,n[10],15,-1051523),s=u(s,c,f,a,n[1],21,-2054922799),a=u(a,s,c,f,n[8],6,1873313359),f=u(f,a,s,c,n[15],10,-30611744),c=u(c,f,a,s,n[6],15,-1560198380),s=u(s,c,f,a,n[13],21,1309151649),a=u(a,s,c,f,n[4],6,-145523070),f=u(f,a,s,c,n[11],10,-1120210379),c=u(c,f,a,s,n[2],15,718787259),s=u(s,c,f,a,n[9],21,-343485551),e[0]=t(a,e[0]),e[1]=t(s,e[1]),e[2]=t(c,e[2]),e[3]=t(f,e[3])},s=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},c=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n},f=function(e){var t,n,r,o,i,u,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;c>=t;t+=64)a(f,s(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(a(f,r),t=0;16>t;t+=1)r[t]=0;return o=8*c,o=o.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),u=parseInt(o[1],16)||0,r[14]=i,r[15]=u,a(f,r),f},l=function(e){var t,n,r,o,i,u,s=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;s>=t;t+=64)a(f,c(e.subarray(t-64,t)));for(e=s>t-64?e.subarray(t-64):new Uint8Array(0),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(a(f,r),t=0;16>t;t+=1)r[t]=0;return o=8*s,o=o.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),u=parseInt(o[1],16)||0,r[14]=i,r[15]=u,a(f,r),f},d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],h=function(e){var t,n="";for(t=0;4>t;t+=1)n+=d[e>>8*t+4&15]+d[e>>8*t&15];return n},p=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=h(e[t]);return e.join("")},v=function(e){return p(f(e))},y=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==v("hello")&&(t=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}),y.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},y.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;n>=t;t+=64)a(this._state,s(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},y.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),n=e?this._state:p(this._state),this.reset(),n},y.prototype._finish=function(e,t){var n,r,o,i=t;if(e[i>>2]|=128<<(i%4<<3),i>55)for(a(this._state,e),i=0;16>i;i+=1)e[i]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),o=parseInt(n[1],16)||0,e[14]=r,e[15]=o,a(this._state,e)},y.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},y.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},y.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=f(e);return t?n:p(n)},y.hashBinary=function(e,t){var n=f(e);return t?n:p(n)},y.ArrayBuffer=function(){this.reset()},y.ArrayBuffer.prototype.append=function(e){var t,n=this._concatArrayBuffer(this._buff,e),r=n.length;for(this._length+=e.byteLength,t=64;r>=t;t+=64)a(this._state,c(n.subarray(t-64,t)));return this._buff=r>t-64?n.subarray(t-64):new Uint8Array(0),this},y.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)i[t>>2]|=r[t]<<(t%4<<3);return this._finish(i,o),n=e?this._state:p(this._state),this.reset(),n},y.ArrayBuffer.prototype._finish=y.prototype._finish,y.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},y.ArrayBuffer.prototype.destroy=y.prototype.destroy,y.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,r=new Uint8Array(n+t.byteLength);return r.set(e),r.set(new Uint8Array(t),n),r},y.ArrayBuffer.hash=function(e,t){var n=l(new Uint8Array(e));return t?n:p(n)},y})},{}],43:[function(e,t,n){"use strict";var r=e(16),o=e(6),i=e(14);n.createIndex=r.toPromise(function(e,t){if("undefined"==typeof t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide an index to create"));var n="http"===this.type()?o:i;n.createIndex(this,e,t)}),n.find=r.toPromise(function(e,t){if("undefined"==typeof t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to find()"));var n="http"===this.type()?o:i;n.find(this,e,t)}),n.getIndexes=r.toPromise(function(e){var t="http"===this.type()?o:i;t.getIndexes(this,e)}),n.deleteIndex=r.toPromise(function(e,t){if("undefined"==typeof t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide an index to delete"));var n="http"===this.type()?o:i;n.deleteIndex(this,e,t)}),"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(n)},{14:14,16:16,6:6}]},{},[43])(43)});
